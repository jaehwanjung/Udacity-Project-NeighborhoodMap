!function(){"use strict";window.Position=function(e,n){this.lat=e,this.lng=n},window.Position.prototype.toString=function(){return"{lat: "+this.lat+", lng: "+this.lng+"}"}}(),function(){"use strict";window.Marker=function(e,n,o,i){this.identifier=e,this.showFunction=n,this.hideFunction=o,this.clickFunction=i},window.Marker.prototype.show=function(){this.showFunction()},window.Marker.prototype.hide=function(){this.hideFunction()},window.Marker.prototype.click=function(){this.clickFunction()}}(),function(){"use strict";function e(e,n){return e+n.toString()}function n(e,n,o){return void 0===e||void 0===e[n]?o:e[n]}window.Venue=function(o){this.name=o.name,this.contact=n(o.contact,"formattedPhone","No contact information"),this.address=n(o.location,"formattedAddress","No address"),this.position=new window.Position(o.location.lat,o.location.lng),this.category=n(o.categories[0],"name","No category"),this.url=n(o,"url","No Url"),this.identifier=e(this.name,this.position)}}(),function(){"use strict";function e(e){var n=document.createElement("script");n.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDYFVxtFk26wbfNGXDY2JWcQWx-0EXyRz4&v=3.exp&signed_in=false&libraries=places&callback="+e,document.body.appendChild(n)}function n(e,n){o(),i(n),t(e)}function o(){var e={center:{lat:49.283742,lng:-123.122575},zoom:18};w=new google.maps.Map(h,e),f=new google.maps.Geocoder}function i(e){var n=new google.maps.places.Autocomplete(v,{types:["geocode"]});google.maps.event.addListener(n,"place_changed",function(){e(n.getPlace().formatted_address)})}function t(e){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(n){r(n),e&&e()},s):c()}function r(e){var n=new window.Position(e.coords.latitude,e.coords.longitude);a(n)}function a(e){p=e,w.setCenter(e)}function s(){window.alert("Geocode failed. Can't get the user's current position.")}function c(){window.alert("Browser doesn't support Geolocation. Can't get the user's current position")}function d(e,n){f.geocode({address:e},function(e,o){if(o===google.maps.GeocoderStatus.OK){var i=e[0].geometry.location,t=new window.Position(i.lat(),i.lng());a(t),n()}else window.alert("Geocode was not successful for the following reason: "+o)})}function u(e){var n=new google.maps.Marker({position:e.position,map:w,title:e.name}),o='<p class="marker-infoWindow-title">'+e.name+'</p><div  class="marker-infoWindow-content"<p>'+e.contact+"</p><p>"+e.address+"</p><p>"+e.category+"</p><p>"+e.url+"</p></div>",i=new google.maps.InfoWindow({content:o});google.maps.event.addListener(n,"click",function(){g&&g.close(),i.open(w,n),g=i});var t=function(){n.setMap(w)},r=function(){n.setMap(null)},a=function(){google.maps.event.trigger(n,"click"),w.panTo(n.position)},s=e.identifier;return new window.Marker(s,t,r,a)}function l(){return p}var w,f,p,g,h=$("#map-canvas")[0],v=$("#addressbar")[0];window.map={loadScript:e,initialize:n,centerMapByPosition:a,centerMapByAddress:d,addMarker:u,getCurrentPosition:l}}(),function(){"use strict";function e(e,r){var a=n(e);$.getJSON(a,function(e){if(200===e.meta.code){var n=o(e.response);r(n)}else i()}).fail(t)}function n(e){return r+"client_id="+a.CLIENT_ID+"&client_secret="+a.CLIENT_SECRET+"&limit="+s+"&intent="+c+"&ll="+e.lat+","+e.lng}function o(e){var n=[],o=e.venues;for(var i in o)if(o.hasOwnProperty(i)){var t=o[i],r=new window.Venue(t);"Neighborhood"!==r.category&&n.push(r)}return n}function i(){window.alert("Venue search engine failed.")}function t(){window.alert("Venue search engine could not be reached.")}var r="https://api.foursquare.com/v2/venues/search?",a={CLIENT_ID:"WD5S0ZAJQC3SHWEQYVZAXKQGMK0IWB3YESWWSGG24YDI54QV",CLIENT_SECRET:"PG3H3TEYU4RFGFL24QNJMESWPOVAH4GED51SYO5YMH5JLERP&v=20130815"},s=50,c="checkin";window.venueSearchEngine={searchTopPicks:e}}(),function(){"use strict";window.ViewModel=function(){function e(e,n,o){return o.indexOf(e)===n}function n(){var e=window.map.getCurrentPosition(),n=function(e){for(var n in e)if(e.hasOwnProperty(n)){var o=e[n];t[o.identifier]=window.map.addMarker(o),i.allVenues.push(o)}};window.venueSearchEngine.searchTopPicks(e,n)}function o(){i.allVenues.removeAll();for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];n.hide()}t={}}var i=this,t={};i.filterKeyword=window.ko.observable(""),i.allVenues=window.ko.observableArray([]),i.isFilterSearchBoxSelected=window.ko.observable(!1),i.currentAddress=window.ko.observable(""),i.isVenueListToggled=window.ko.observable(!0),i.isTypeaheadListMouseOver=window.ko.observable(!1),i.isTypeaheadListOn=window.ko.computed(function(){return i.isFilterSearchBoxSelected()||i.isTypeaheadListMouseOver()}),i.allCategories=window.ko.computed(function(){var n=i.allVenues(),o=$.map(n,function(e){return e.category});return o.filter(e)}),i.filteredCategories=window.ko.computed(function(){var e=i.filterKeyword(),n=i.allCategories();return $.grep(n,function(n){return""===e||n.toLowerCase().includes(e.toLowerCase())})}),i.filteredVenues=window.ko.computed(function(){var e=i.filteredCategories(),n=i.allVenues(),o=$.grep(n,function(n){return e.indexOf(n.category)>=0}),r=$.map(o,function(e){return e.identifier});for(var a in t)if(t.hasOwnProperty(a)){var s=t[a];r.indexOf(s.identifier)>=0?s.show():s.hide()}return o}),i.initialize=function(){window.map.initialize(n,i.setNeighborhood)},i.setNeighborhood=function(e){o();var t=e?e:i.currentAddress();window.map.centerMapByAddress(t,n)},i.toggleVenueList=function(){var e=i.isVenueListToggled();i.isVenueListToggled(!e)},i.clickVenueMarker=function(e){var n=t[e.identifier];n.click()},i.clickTypeahead=function(e){i.filterKeyword(e)},i.typeaheadListMouseOver=function(){i.isTypeaheadListMouseOver(!0)},i.typeaheadListMouseOut=function(){i.isTypeaheadListMouseOver(!1)},i.loadScript=function(e){window.map.loadScript(e)}}}(),function(){"use strict";window.viewModel=new window.ViewModel,window.ko.applyBindings(window.viewModel),window.onload=function(){window.viewModel.loadScript("window.viewModel.initialize")}}();